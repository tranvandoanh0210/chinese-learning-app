<div class="app-outlet data-management">
  <h3>Qu·∫£n l√Ω d·ªØ li·ªáu</h3>
  <div class="github-status" [class]="githubConnected ? 'connected' : 'disconnected'">
    <h4>Tr·∫°ng th√°i GitHub:</h4>
    <p>
      <span class="status-indicator">{{
        githubConnected ? '‚úÖ ƒê√£ k·∫øt n·ªëi' : '‚ùå Ch∆∞a k·∫øt n·ªëi'
      }}</span>
    </p>
    <div *ngIf="!githubConnected" class="setup-guide">
      <h5>H∆∞·ªõng d·∫´n c·∫•u h√¨nh GitHub Token:</h5>
      <ol>
        <li>
          Truy c·∫≠p:
          <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings ‚Üí Tokens</a>
        </li>
        <li>T·∫°o Personal Access Token v·ªõi quy·ªÅn <code>repo</code></li>
        <li>Copy token v√† c·∫≠p nh·∫≠t v√†o file <code>environment.ts</code></li>
        <li>Reload ·ª©ng d·ª•ng</li>
      </ol>
    </div>
  </div>
  <div class="action-buttons">
    <button class="btn btn-primary" (click)="exportData()">üì• Export to Excel</button>

    <div class="import-section">
      <input
        type="file"
        #fileInput
        (change)="onFileSelected($event)"
        accept=".xlsx, .xls"
        style="display: none"
      />
      <button class="btn btn-success" (click)="fileInput.click()">üì§ Import from Excel</button>
    </div>
  </div>

  <!-- Import Results -->
  @if(importResult){
  <div class="import-results">
    <h4>K·∫øt qu·∫£ import</h4>
    <div [class]="importResult.success ? 'success' : 'error'">
      {{ importResult.success ? 'Import th√†nh c√¥ng!' : 'Import th·∫•t b·∫°i!' }}
    </div>

    @if(importResult.success){
    <div>
      <p>ƒê√£ import {{ importResult.lessons.length }} b√†i h·ªçc</p>
      <button class="btn btn-success" (click)="saveAndDeploy()">üíæ L∆∞u v√† Deploy</button>
    </div>
    } @if(importResult.errors.length > 0){
    <div class="errors">
      <h5>L·ªói:</h5>
      <ul>
        @for (error of importResult.errors; track $index) {
        <li>{{ error }}</li>
        }
      </ul>
    </div>
    }
  </div>
  }

  <!-- Deployment Status -->
  @if(deploymentStatus){
  <div class="deployment-status">
    <h4>Tr·∫°ng th√°i deploy</h4>
    <div [class]="deploymentStatus.success ? 'success' : 'error'">
      {{ deploymentStatus.message }}
    </div>
  </div>
  }
</div>
